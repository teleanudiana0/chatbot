<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bienestar Mental</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
  <link rel="stylesheet" href="font-awesome-4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="slick/slick.css"/>
  <link rel="stylesheet" type="text/css" href="slick/slick-theme.css"/>
  <link rel="stylesheet" href="css/tooplate-style.css">
  <link rel="stylesheet" href="css/magnific-popup.css">

  <style>
    #chat-box .card-body p {
      margin: 5px 0;
      padding: 10px 15px;
      border-radius: 15px;
      max-width: 80%;
      word-wrap: break-word;
      font-size: 12px;
    }
    #chat-box .card-body p strong {
      color: #333;
    }
    #chat-box .card-body p:nth-child(odd) {
      background-color: #f8f9fa;
      margin-right: 20%;
      text-align: left;
    }
    #chat-box .card-body p:nth-child(even) {
      background-color: #ffe5e5;
      margin-left: 20%;
      text-align: right;
    }
    #chat-box .card-body ul {
      padding-left: 20px;
      margin: 5px 0;
    }
    #chat-box .card-body li {
      margin-bottom: 5px;
      list-style-type: disc;
      font-size: 12px;
    }
    #chat-box .card-body p p {
      margin: 0;
    }
    #chat-box .card-footer {
      padding: 10px;
      background-color: #fff;
    }
    #chat-box .input-group {
      border: 1px solid #ced4da;
      border-radius: 20px;
      overflow: hidden;
    }
    #chat-box .form-control {
      border: none;
      box-shadow: none;
      border-radius: 20px;
      font-size: 12px;
    }
    #chat-box .input-group-append .btn {
      border: none;
      background-color: transparent;
      color: #dc3545;
      padding: 0 15px;
      height: 100%;
      display: flex;
      align-items: center;
    }
    #chat-box .card-header {
      font-size: 14px;
    }
  </style>
</head>

<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="#">Bienestar Mental</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item"><a class="nav-link" href="#tm-section-2">Servicios</a></li>
        <li class="nav-item"><a class="nav-link" href="#tm-section-3">Nosotros</a></li>
        <li class="nav-item"><a class="nav-link" href="#tm-section-4">Terapias</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">Contacto</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Sección Principal -->
<div class="parallax-window" data-parallax="scroll" data-image-src="img/bg-img-01.jpg">
  <section class="container tm-page-1-content">
    <div class="row">
      <div class="col-md-6 ml-auto tm-text-white">
        <header><h1>Tu bienestar emocional importa</h1></header>
        <p>Somos un equipo comprometido con tu salud mental. Ofrecemos acompañamiento psicológico y herramientas para el autoconocimiento, la gestión emocional y el desarrollo personal.</p>
        <a href="#tm-section-2" class="btn btn-danger">Explorar servicios</a>
      </div>
    </div>
  </section>
</div>

<!-- Servicios -->
<div id="tm-section-2" class="parallax-window" data-parallax="scroll" data-image-src="img/bg-img-02.jpg">
  <section class="container tm-page-1-content tm-page-2">
    <div class="row">
      <article class="col-md-6 tm-article tm-bg-white-transparent">
        <header><h2>Evaluación Psicológica</h2></header>
        <b>Realizamos diagnósticos clínicos y evaluaciones personalizadas para ayudarte a comprender mejor tus procesos mentales y emocionales.</b>
      </article>
      <article class="col-md-6 tm-article tm-bg-white-transparent">
        <header><h2>Terapia Individual</h2></header>
        <b>Espacios seguros para trabajar en tu bienestar emocional, autoestima, ansiedad, depresión y más.</b>
        <a href="#tm-section-3" class="btn btn-danger ml-auto mr-0 tm-btn-block">Conócenos</a>
      </article>
    </div>
  </section>
</div>

<!-- Nosotros -->
<div id="tm-section-3" class="parallax-window" data-parallax="scroll" data-image-src="img/bg-img-03.jpg">
  <section class="container tm-page-1-content">
    <div class="row1">
      <div class="col-xl-6 col-md-8 ml-auto">
        <article class="tm-bg-white-transparent-page3">
          <header><h5 class="tm-bg-white">Sobre nuestro equipo</h5></header>
          <p class="tm-bg-white2">Somos psicólogos especializados en diversas áreas clínicas y educativas, con enfoque humano y ético. Nuestra misión es acompañarte en tu proceso de crecimiento emocional.</p>
          <a href="#tm-section-4" class="btn btn-danger tm-btn-right">Ver terapias</a>
        </article>
      </div>
    </div>
  </section>
</div>

<!-- Terapias -->
<div id="tm-section-4" class="parallax-window" data-parallax="scroll" data-image-src="img/bg-img-04.jpg">
  <div class="row tm-page-4-content">
    <article class="col-xs-6 col-md-4 tm-bg-white-transparent">
      <header><h3>Terapia Cognitivo-Conductual</h3></header>
      <p>Trabajamos con técnicas prácticas para identificar y modificar patrones de pensamiento disfuncionales.</p>
    </article>
    <article class="col-xs-6 col-md-4 tm-bg-white-transparent">
      <header><h3>Terapia Humanista</h3></header>
      <p>Enfocada en el aquí y ahora, promovemos la autoaceptación, empatía y crecimiento personal.</p>
    </article>
    <article class="col-xs-6 col-md-4 tm-bg-white-transparent">
      <header><h3>Atención Psicoeducativa</h3></header>
      <p>Apoyo a estudiantes, padres y docentes en temas como TDAH, ansiedad escolar y hábitos de estudio.</p>
    </article>
  </div>
</div>

<!-- Contacto -->
<div class="parallax-window tm-position-relative tm-form-section" data-parallax="scroll" data-image-src="img/bg-img-06.jpg" id="contact">
  <div class="container">
    <div class="row1">
      <div class="col-xs-12">
        <header><h5>Contáctanos</h5></header>
      </div>
    </div>
    <div class="row tm-page-5-content">
      <div class="col-lg-4 col-md-6 col-xs-12">
        <form action="#contact" method="post" class="contact-form">
          <div class="form-group">
            <input type="text" name="contact_name" class="form-control" placeholder="Nombre" required/>
          </div>
          <div class="form-group">
            <input type="email" name="contact_email" class="form-control" placeholder="Correo" required/>
          </div>
          <div class="form-group">
            <textarea name="contact_message" class="form-control" rows="9" placeholder="Mensaje" required></textarea>
          </div>
          <button type="submit" class="btn btn-danger tm-btn-submit">Enviar</button>
        </form>
      </div>
      <div class="col-lg-8 col-md-6 col-xs-12">
        <div class="tm-address-box">
          <p>¿Tienes dudas o deseas agendar una sesión? Escríbenos, estaremos encantados de apoyarte.</p>
          <address>
            <b>Nuestra dirección</b><br><br>
            Calle Bienestar 123,<br>
            Ciudad Saludable,<br>
            Tel: +52 123 456 7890
          </address>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CHATBOT FLOTANTE -->
<div id="chat-btn" class="position-fixed" style="bottom: 20px; right: 20px; z-index: 999;">
  <button class="btn btn-danger rounded-circle p-3 shadow" onclick="toggleChat()">
    <i class="fa fa-commenting"></i>
  </button>
</div>

<div id="chat-box" class="card position-fixed shadow" style="width: 400px; bottom: 90px; right: 20px; z-index: 999; display: none;">
  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
    <span>¿Necesitas ayuda?</span>
    <button class="btn btn-sm btn-light" onclick="toggleChat()">×</button>
  </div>
  <div class="card-body" style="height: 300px; overflow-y: auto;" id="chat-content">
    <p><strong>Asistente:</strong> ¡Hola! ¿En qué puedo ayudarte hoy?</p>
  </div>
  <div class="card-footer">
    <form id="chat-form" onsubmit="sendMessage(event)">
      <div class="input-group">
        <input type="text" id="chat-input" class="form-control" placeholder="Escribe tu mensaje..." required>
        <div class="input-group-append">
          <button type="submit" class="btn"><i class="fa fa-paper-plane"></i></button>
        </div>
      </div>
    </form>
  </div>  
</div>

<!-- JS -->
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/parallax.min.js"></script>
<script src="slick/slick.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script>
  function setCarousel() {
    var slider = $('.tm-img-slider');
    if (slider.hasClass('slick-initialized')) {
      slider.slick('destroy');
    }
    if ($(window).width() > 991) {
      slider.slick({ dots: true, infinite: true, slidesToShow: 4, slidesToScroll: 1 });
    } else {
      slider.slick({ dots: true, infinite: true, slidesToShow: 2, slidesToScroll: 1 });
    }
  }

  function toggleChat() {
    var chatBox = document.getElementById('chat-box');
    chatBox.style.display = (chatBox.style.display === 'none' || chatBox.style.display === '') ? 'block' : 'none';
  }

  function sendMessage(event) {
    event.preventDefault();

    const input = document.getElementById('chat-input');
    const chatContent = document.getElementById('chat-content');
    const message = input.value.trim();

    if (!message) return;
    const userMessage = document.createElement('p');
    userMessage.innerHTML = `<strong>Tú:</strong> ${message}`;
    chatContent.appendChild(userMessage);
    chatContent.scrollTop = chatContent.scrollHeight;
    fetch('http://localhost:5000/chat', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ message: message }),
    })
      .then(response => response.json())
      .then(data => {
        const botMessage = document.createElement('p');
        if (data.response) {
          botMessage.innerHTML = `<strong>Asistente:</strong> ${data.response}`;
        } else {
          botMessage.innerHTML = `<strong>Asistente:</strong> Lo siento, hubo un error: ${data.error}`;
        }
        chatContent.appendChild(botMessage);
        chatContent.scrollTop = chatContent.scrollHeight;
      })
      .catch(error => {
        const errorMessage = document.createElement('p');
        errorMessage.innerHTML = `<strong>Asistente:</strong> Error al conectar con el servidor.`;
        chatContent.appendChild(errorMessage);
        chatContent.scrollTop = chatContent.scrollHeight;
      });
    input.value = '';
  }

  $(document).ready(function () {
    setCarousel();
    $('.tm-img-slider').magnificPopup({ delegate: 'a', type: 'image' });
    $(window).resize(function () {
      setCarousel();
    });
  });
</script>

</body>
</html>